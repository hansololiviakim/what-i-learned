# 실행 컨텍스트(Execution Context)

## 🗂️ 목차

- 💡 [요약 정리](#-요약-정리)

- 📚 [실행 컨텍스트의 종류](#-실행-컨텍스트의-종류)

- 📚 [실행 컨텍스트의 종류](#-실행-컨텍스트의-구성-요소)

- 📚 [실행 컨텍스트의 종류](#-실행-컨텍스트의-동작-과정)

- 📚 [실행 컨텍스트의 종류](#-실행-컨텍스트와-호이스팅hoisting)

- 📚 [실행 컨텍스트의 종류](#-스코프와-스코프-체인)

- 📎 [참고 자료](#-참고-자료)

<br /><br />

## 💡 요약 정리

> <br />실행 컨텍스트(Execution Context)는 **자바스크립트 코드가 실행되는 환경**을 정의하는 개념이다.  
> 자바스크립트는 **싱글 스레드 기반**으로 동작하기 때문에 한 번에 하나의 코드 블록만 실행할 수 있다.  
> 하지만 실행 컨텍스트를 **콜 스택** (Call Stack)으로 관리하면서 실행 흐름을 조율한다.  
> 실행 컨텍스트는 코드 실행 중 **변수, 함수 선언, this 바인딩 등의 정보를 저장하고 관리**한다.<br /><br />

<br /><br />

## 📚 실행 컨텍스트의 종류

### 1) 전역 실행 컨텍스트 (Global Execution Context)

- 코드가 실행될 때 **가장 먼저 생성**되는 컨텍스트

- 프로그램이 종료될 때까지 유지됨

- 전역에서 선언된 변수와 함수는 전역 실행 컨텍스트에 포함됨

- 브라우저 환경: `window` 객체

- Node.js 환경: `global` 객체

<br />

### 2) 함수 실행 컨텍스트 (Function Execution Context)

- 함수가 호출될 때마다 생성됨

- 함수 실행이 끝나면 콜 스택에서 제거됨

- 함수 내부의 변수와 선언된 함수는 해당 컨텍스트 내에서만 접근 가능

<br />

### 3) eval 실행 컨텍스트 (Eval Execution Context)

- `eval()` 함수 내부에서 실행되는 코드에 대해 생성됨

- 보안 및 성능 문제로 인해 사용이 권장되지 않음

<br /><br />

## 📚 실행 컨텍스트의 구성 요소

### 1) 환경 기록 (Environment Record)

- 현재 실행 컨텍스트 내에서 **선언된 변수, 함수, this** 등을 저장하는 공간

- 전역 컨텍스트에서는 `전역 객체(Global Object)`가 환경 기록을 담당

- 함수 컨텍스트에서는 `렉시컬 환경(Lexical Environment)`이 환경 기록을 담당

<br />

### [참고] 전역 객체 vs 렉시컬 환경

- **전역 객체**

  - 전역 실행 컨텍스트가 생성될 때 자동으로 생성되며, `var`로 선언한 변수와 함수 선언문을 저장함 (window 또는 global 객체)

- **렉시컬 환경**

  - 함수 실행 시 생성되며, 함수 내부에서 선언된 변수, 함수 등을 저장하는 역할을 수행

<br />

### 2) 외부 환경 참조 (Outer Environment Reference)

- 현재 실행 컨텍스트를 생성한 후 외부 렉시컬 환경을 참조

- 이를 통해 **스코프 체인** (Scope Chain)이 형성되며, 변수를 검색할 때 현재 컨텍스트에서 찾지 못하면 외부 컨텍스트를 탐색함

<br />

### 3) this 바인딩 (this Binding)

- 실행 컨텍스트가 어떤 객체를 참조하는지를 결정

- 전역 컨텍스트에서 this는 `window` (브라우저) 또는 `global` (Node.js)을 가리킴

- this는 함수 호출 방식(일반 함수, 메서드, 생성자, 화살표 함수 등)에 따라 달라짐

<br /><br />

## 📚 실행 컨텍스트의 동작 과정

1. 전역 실행 컨텍스트 생성 → 프로그램 시작 시 생성됨

2. 함수 실행 컨텍스트 생성 → 함수가 호출될 때마다 새 컨텍스트가 생성됨

3. 콜 스택에서 실행 컨텍스트 관리 → 현재 실행 중인 컨텍스트는 콜 스택의 맨 위에 위치하며, 가장 마지막에 추가된 컨텍스트가 먼저 제거됨 (LIFO 원칙)

4. 실행이 끝난 컨텍스트는 콜 스택에서 제거됨

<br /><br />

## 📚 실행 컨텍스트와 호이스팅(Hoisting)

### 1) 호이스팅이란?

- 실행 컨텍스트가 생성될 때 **변수와 함수 선언을 메모리에 먼저 저장하는 과정**

- 코드 실행 전에 변수 및 함수 선언 정보를 수집하여 **환경 기록** (Environment Record)에 등록

- `var` 키워드 → 선언 단계에서 `undefined`로 초기화되며, 할당 단계에서 실제 값이 할당됨

- 함수 선언문 → 전체 함수가 저장됨

<br />

### 2) let, const와 TDZ (Temporal Dead Zone)

- `let`, `const`는 선언 전에 접근할 수 없음 (**TDZ** 존재)

- 선언문을 만나기 전까지 변수에 접근하면 `ReferenceError` 발생

- TDZ는 **변수가 선언 되기 전에 접근하는 것을 방지하여, 스코프 내에서 안전한 변수 접근을 보장**함

<br /><br />

## 📚 스코프와 스코프 체인

### 1) 스코프(Scope)

- 변수의 유효 범위를 의미하며, 실행 컨텍스트가 변수를 참조할 수 있는 범위를 결정함

<br />

### 2) 스코프 체인 (Scope Chain)

- 실행 컨텍스트에서 변수를 검색할 때, 현재 컨텍스트에서 찾지 못하면 외부 컨텍스트를 탐색

- 이를 통해 중첩 함수가 외부 함수의 변수에 접근 가능

<br /><br />

## 📎 참고 자료

- [자바스크립트 실행 컨텍스트](https://junilhwang.github.io/TIL/Javascript/Domain/Execution-Context/)

- [제로초: 실행 컨텍스트 - 클로저와 호이스팅](https://www.zerocho.com/category/JavaScript/post/5741d96d094da4986bc950a0)

- [자바스크립트 실행 컨텍스트 원리](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8)

- [매일메일: 실행 컨텍스트에 대해서 설명해주세요](https://www.maeil-mail.kr/question/4)

- [자바스크립트의 실행 컨텍스트 완벽 정리 (ft. 스코프, TDZ, 호이스팅)](https://oliviakim.tistory.com/197)
